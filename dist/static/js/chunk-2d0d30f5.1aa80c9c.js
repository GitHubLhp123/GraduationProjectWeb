(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d30f5"],{"5ac6":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{model:{value:e.query.jobName,callback:function(t){e.$set(e.query,"jobName",t)},expression:"query.jobName"}},[e._v("topic")])],1),a("el-form-item",{attrs:{label:"任务标签"}},[a("el-input",{model:{value:e.query.jobLabel,callback:function(t){e.$set(e.query,"jobLabel",t)},expression:"query.jobLabel"}},[e._v("id")])],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:e.query.state,callback:function(t){e.$set(e.query,"state",t)},expression:"query.state"}},[a("el-option",{key:"1",attrs:{label:"运行中",value:"run"}}),a("el-option",{key:"2",attrs:{label:"成功",value:"success"}}),a("el-option",{key:"3",attrs:{label:"失败",value:"error"}}),a("el-option",{key:"4",attrs:{label:"失效",value:"invalid"}})],1)],1),a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.getData}})],1)],1),a("el-table",{staticStyle:{"font-size":"10px"},attrs:{"highlight-current-row":"",data:e.tableData,border:"","show-header":!0}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{label:"ID",type:"index",index:e.countIndex,width:"50"}}),e._l(e.columnNames,(function(t,l){return[a("el-table-column",{key:l,attrs:{"show-overflow-tooltip":"",prop:t.prop,label:t.label,align:"left"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("span",[e._v("\n                                            "+e._s(l.row[t.prop])+"\n                                                  ")])]}}],null,!0)})]})),a("el-table-column",{attrs:{label:"日志",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-document",circle:""},on:{click:function(a){return e.getJobTriggerLog(t)}}})]}}])})],2),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:this.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"100%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:50,placeholder:""},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)],1)},o=[],n=a("ec9b"),s={name:"JobTriggerList",data:function(){return{textarea:"",dialogVisible:!1,columnNames:[],tableData:[],query:{state:"",pageIndex:1,pageSize:10,jobName:"",jobLabel:"",teamName:this.$store.state.personInfo.currentTeam.teamName,lastUserName:""},pageTotal:0}},created:function(){this.columnNames.push({label:"jobName",prop:"jobName"}),this.columnNames.push({label:"jobLabel",prop:"jobLabel"}),this.columnNames.push({label:"batchNo",prop:"batchNo"}),this.columnNames.push({label:"state",prop:"state"}),this.columnNames.push({label:"teamName",prop:"teamName"}),this.columnNames.push({label:"message",prop:"message"}),this.getData()},methods:{getJobTriggerLog:function(e){var t=this;console.log(e),console.log("getJobTriggerLog"),Object(n["a"])({url:"/job/getJobTriggerLog",methods:"get",params:{jobName:e.row.jobName,batchNo:e.row.batchNo}}).then((function(e){console.log(e.data),t.textarea=e.data,t.dialogVisible=!0})).catch((function(e){t.$notify({title:"警告",message:"保存失败",type:"warning"})}))},getData:function(){var e=this;Object(n["a"])({url:"/job/getJobTriggerList",methods:"get",params:{jobName:this.query.jobName,jobLabel:this.query.jobLabel,state:this.query.state,lastUserName:this.query.lastUserName,pageIndex:this.query.pageIndex,pageSize:this.query.pageSize,teamName:this.query.teamName}}).then((function(t){e.tableData=t.data,e.pageTotal=t.dataLength})).catch((function(t){e.$notify({title:"警告",message:"保存失败",type:"warning"})}))},countIndex:function(e){return(this.query.pageIndex-1)*this.query.pageSize+e+1},handleSizeChange:function(e){this.query.pageSize=e,this.getData(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.query.pageIndex=e,this.getData(),console.log("当前页: ".concat(e))}}},r=s,i=a("2877"),u=Object(i["a"])(r,l,o,!1,null,"3ffdf778",null);t["default"]=u.exports}}]);