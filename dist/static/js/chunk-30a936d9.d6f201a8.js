(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30a936d9"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a("6b75");function s(e,t){if(e){if("string"===typeof e)return Object(l["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(l["a"])(e,t):void 0}}},"0933":function(e,t,a){"use strict";a("ec55")},1758:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-remove":e.removeTab},model:{value:e.activeJobName,callback:function(t){e.activeJobName=t},expression:"activeJobName"}},[a("el-tab-pane",{attrs:{label:"任务列表",name:"jobList"}},[a("div",[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{model:{value:e.query.jobName,callback:function(t){e.$set(e.query,"jobName",t)},expression:"query.jobName"}},[e._v("topic")])],1),a("el-form-item",{attrs:{label:"任务标签"}},[a("el-input",{model:{value:e.query.jobLabel,callback:function(t){e.$set(e.query,"jobLabel",t)},expression:"query.jobLabel"}},[e._v("id")])],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:e.query.state,callback:function(t){e.$set(e.query,"state",t)},expression:"query.state"}},[a("el-option",{key:"1",attrs:{label:"新建",value:"NEW"}}),a("el-option",{key:"2",attrs:{label:"变更",value:"CHANGE"}}),a("el-option",{key:"3",attrs:{label:"已发布",value:"PUBLISHED"}}),a("el-option",{key:"4",attrs:{label:"已下线",value:"INVALID"}})],1)],1),a("el-form-item",{attrs:{label:"当前操作者"}},[a("el-input",{model:{value:e.query.lastUserName,callback:function(t){e.$set(e.query,"lastUserName",t)},expression:"query.lastUserName"}})],1),a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.getJobList}}),a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"selecttip"},[a("span",[e._v("添加(开发中)")])])]),a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(t){return e.createJob()}}})],1)],1)],1),a("div",[a("el-table",{ref:"tableData",staticClass:"table",staticStyle:{"font-size":"10px"},attrs:{"row-style":{height:"30px"},"cell-style":{padding:"0px"},data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"cell-dblclick":e.cellClick}},[a("el-table-column",{attrs:{prop:"jobName",label:"名称",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"jobLabel",label:"中文名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80px",prop:"teamName",label:"团队名",sortable:"cycleType"}}),a("el-table-column",{attrs:{width:"100px",prop:"state",label:"状态",sortable:"state"}}),a("el-table-column",{attrs:{prop:"createUserName",label:"创建人","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"100px",prop:"lastUserName",label:"当前责任人"}}),a("el-table-column",{attrs:{width:"100px",prop:"createUser",label:"创建人",sortable:"state"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:"createTime","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"lastUpdTime",label:"操作时间",sortable:"lastUpdTime","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.cellDbClick(t)}}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:this.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])]),e._l(e.jobInfoDataList,(function(e){return a("el-tab-pane",{key:e.jobName,attrs:{label:e.jobName,name:e.jobName,closable:""}},[a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"用户管理"}},[a("jobInfo",{ref:"jobInfo",refInFor:!0,attrs:{jobName:e.jobName,openType:e.openType}})],1),a("el-tab-pane",{attrs:{label:"配置管理"}},[a("graph",{ref:"plugList",refInFor:!0,attrs:{jobName:e.jobName,openType:e.openType}})],1)],1)],1)}))],2)},s=[],i=(a("ac6a"),a("ec9b")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名",prop:"jobName"}},[a("el-input",{attrs:{disabled:"show"===e.openType},model:{value:e.ruleForm.jobName,callback:function(t){e.$set(e.ruleForm,"jobName",t)},expression:"ruleForm.jobName"}})],1),a("el-form-item",{attrs:{label:"任务标签",prop:"jobLabel"}},[a("el-input",{attrs:{disabled:"show"===e.openType},model:{value:e.ruleForm.jobLabel,callback:function(t){e.$set(e.ruleForm,"jobLabel",t)},expression:"ruleForm.jobLabel"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-input",{attrs:{disabled:"show"===e.openType},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}})],1),a("el-form-item",{attrs:{label:"输入表",prop:"inputTabs"}},[a("el-input",{attrs:{disabled:"show"===e.openType},on:{focus:function(t){e.editInputTabsDialogVisible=!0}},model:{value:e.ruleForm.inputTabs,callback:function(t){e.$set(e.ruleForm,"inputTabs",t)},expression:"ruleForm.inputTabs"}})],1),a("el-form-item",{attrs:{label:"任务依赖"}},[a("el-button",{on:{click:function(t){e.editDependsTabsDialogVisible=!0}}},[e._v("依赖")])],1),a("el-form-item",{attrs:{label:"输出表",prop:"state"}},[a("el-input",{attrs:{disabled:"show"===e.openType},on:{focus:function(t){e.editOutputTabsDialogVisible=!0}},model:{value:e.ruleForm.outputTabs,callback:function(t){e.$set(e.ruleForm,"outputTabs",t)},expression:"ruleForm.outputTabs"}})],1),a("el-form-item",{attrs:{label:"cron",prop:"cron"}},[a("el-input",{attrs:{type:"text",disabled:"show"===e.openType},on:{focus:function(t){e.editCronDialogVisible=!0}},model:{value:e.ruleForm.cron,callback:function(t){e.$set(e.ruleForm,"cron",t)},expression:"ruleForm.cron"}})],1),a("el-form-item",{attrs:{label:"任务时间周期",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",disabled:"show"===e.openType},model:{value:e.ruleForm.startDate,callback:function(t){e.$set(e.ruleForm,"startDate",t)},expression:"ruleForm.startDate"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("----------")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"endDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"结束时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",disabled:"show"===e.openType},model:{value:e.ruleForm.endDate,callback:function(t){e.$set(e.ruleForm,"endDate",t)},expression:"ruleForm.endDate"}})],1)],1)],1),a("el-form-item",{attrs:{label:"报警邮箱",prop:"emails"}},[a("el-input",{attrs:{disabled:"show"===e.openType},model:{value:e.ruleForm.emails,callback:function(t){e.$set(e.ruleForm,"emails",t)},expression:"ruleForm.emails"}})],1),a("el-form-item",{attrs:{label:"重试次数",prop:"retryCount"}},[a("el-input-number",{attrs:{min:0,max:3,disabled:"show"===e.openType},model:{value:e.ruleForm.retryCount,callback:function(t){e.$set(e.ruleForm,"retryCount",t)},expression:"ruleForm.retryCount"}})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.editCronDialogVisible,width:"80%"},on:{"update:visible":function(t){e.editCronDialogVisible=t}}},[a("cron",{model:{value:e.ruleForm.cron,callback:function(t){e.$set(e.ruleForm,"cron",t)},expression:"ruleForm.cron"}})],1),a("el-dialog",{attrs:{visible:e.editInputTabsDialogVisible,width:"60%"},on:{"update:visible":function(t){e.editInputTabsDialogVisible=t}}},[a("div",{staticStyle:{height:"500px"}},[a("tabs",{model:{value:e.ruleForm.inputTabs,callback:function(t){e.$set(e.ruleForm,"inputTabs",t)},expression:"ruleForm.inputTabs"}})],1)]),a("el-dialog",{attrs:{visible:e.editOutputTabsDialogVisible,width:"60%"},on:{"update:visible":function(t){e.editOutputTabsDialogVisible=t}}},[a("div",{staticStyle:{height:"500px"}},[a("tabs",{model:{value:e.ruleForm.outputTabs,callback:function(t){e.$set(e.ruleForm,"outputTabs",t)},expression:"ruleForm.outputTabs"}})],1)]),a("el-dialog",{attrs:{visible:e.editDependsTabsDialogVisible},on:{"update:visible":function(t){e.editDependsTabsDialogVisible=t}}},[a("div",{staticStyle:{width:"500px",height:"500px"}},[a("depend",{attrs:{inputTabs:e.ruleForm.inputTabs,jobName:e.ruleForm.jobName,openType:e.openType},model:{value:e.ruleForm.depends,callback:function(t){e.$set(e.ruleForm,"depends",t)},expression:"ruleForm.depends"}})],1)]),a("el-button",{attrs:{type:"primary",disabled:"show"===e.openType,plain:""},on:{click:e.saveJobData}},[e._v("保存")])],1)},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cron",attrs:{val:e.value_}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"秒",name:"s"}},[a("second-and-minute",{attrs:{lable:"秒"},model:{value:e.sVal,callback:function(t){e.sVal=t},expression:"sVal"}})],1),a("el-tab-pane",{attrs:{label:"分",name:"m"}},[a("second-and-minute",{attrs:{lable:"分"},model:{value:e.mVal,callback:function(t){e.mVal=t},expression:"mVal"}})],1),a("el-tab-pane",{attrs:{label:"时",name:"h"}},[a("hour",{attrs:{lable:"时"},model:{value:e.hVal,callback:function(t){e.hVal=t},expression:"hVal"}})],1),a("el-tab-pane",{attrs:{label:"日",name:"d"}},[a("day",{attrs:{lable:"日"},model:{value:e.dVal,callback:function(t){e.dVal=t},expression:"dVal"}})],1),a("el-tab-pane",{attrs:{label:"月",name:"month"}},[a("month",{attrs:{lable:"月"},model:{value:e.monthVal,callback:function(t){e.monthVal=t},expression:"monthVal"}})],1),a("el-tab-pane",{attrs:{label:"周",name:"week"}},[a("week",{attrs:{lable:"周"},model:{value:e.weekVal,callback:function(t){e.weekVal=t},expression:"weekVal"}})],1),a("el-tab-pane",{attrs:{label:"年",name:"year"}},[a("year",{attrs:{lable:"年"},model:{value:e.yearVal,callback:function(t){e.yearVal=t},expression:"yearVal"}})],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"sVal",label:"秒",width:"70"}}),a("el-table-column",{attrs:{prop:"mVal",label:"分",width:"70"}}),a("el-table-column",{attrs:{prop:"hVal",label:"时",width:"70"}}),a("el-table-column",{attrs:{prop:"dVal",label:"日",width:"70"}}),a("el-table-column",{attrs:{prop:"monthVal",label:"月",width:"70"}}),a("el-table-column",{attrs:{prop:"weekVal",label:"周",width:"70"}}),a("el-table-column",{attrs:{prop:"yearVal",label:"年"}})],1),a("el-card",{staticClass:"box-card"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getRecentTriggerTime(5)}}},[e._v("最近五次执行时间")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getRecentTriggerTime(10)}}},[e._v("最近十次次执行时间")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getRecentTriggerTime(20)}}},[e._v("最近二十次次执行时间")]),e._l(e.RecentTriggerTimes,(function(t,l){return a("div",{key:l,staticClass:"text item"},[e._v("\n            "+e._s(l+1)+"\n\n\n            "+e._s(t)+"\n        ")])}))],2)],1)},c=[],u=(a("a481"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{val:e.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("每"+e._s(e.lable))])],1),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("周期")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:59,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.start,callback:function(t){e.$set(e.cycle,"start",t)},expression:"cycle.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("至")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:59,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.end,callback:function(t){e.$set(e.cycle,"end",t)},expression:"cycle.end"}}),e._v("\n    "+e._s(e.lable)+"\n  ")],1),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("循环")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:59,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.start,callback:function(t){e.$set(e.loop,"start",t)},expression:"loop.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v(e._s(e.lable)+"开始，每")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:59,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.end,callback:function(t){e.$set(e.loop,"end",t)},expression:"loop.end"}}),e._v("\n    "+e._s(e.lable)+"执行一次\n  ")],1),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("指定")]),a("el-checkbox-group",{model:{value:e.appoint,callback:function(t){e.appoint=t},expression:"appoint"}},e._l(6,(function(t){return a("div",{key:t,staticStyle:{"margin-left":"10px","line-height":"25px"}},e._l(10,(function(l){return a("el-checkbox",{key:l,attrs:{label:t-1+""+(l-1)},on:{change:function(t){e.type="4"}}})})),1)})),0)],1)])}),p=[],m=(a("28a5"),{props:{value:{type:String,default:"*"},lable:{type:String}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var e=[];switch(this.type){case"1":e.push("*");break;case"2":e.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":e.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":e.push(this.appoint.join(","));break;case"6":e.push("".concat(0===this.last?"":this.last,"L"));break;default:e.push("?");break}return this.$emit("input",e.join("")),e.join("")}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}}),d=m,h=(a("5196"),a("2877")),b=Object(h["a"])(d,u,p,!1,null,null,null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{val:e.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("每时")])],1),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("周期")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:23,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.start,callback:function(t){e.$set(e.cycle,"start",t)},expression:"cycle.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("至")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:23,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.end,callback:function(t){e.$set(e.cycle,"end",t)},expression:"cycle.end"}}),e._v("\n    时\n  ")],1),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("循环")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:23,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.start,callback:function(t){e.$set(e.loop,"start",t)},expression:"loop.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("时开始，每")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:23,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.end,callback:function(t){e.$set(e.loop,"end",t)},expression:"loop.end"}}),e._v("\n    时执行一次\n  ")],1),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("指定")]),a("el-checkbox-group",{model:{value:e.appoint,callback:function(t){e.appoint=t},expression:"appoint"}},e._l(3,(function(t){return a("div",{key:t,staticStyle:{"margin-left":"10px","line-height":"25px"}},e._l(10,(function(l){return a("span",{key:l,staticStyle:{display:"inline-block","margin-right":"30px"}},[parseInt(t-1+""+(l-1))<24?a("el-checkbox",{key:l,attrs:{label:t-1+""+(l-1)},on:{change:function(t){e.type="4"}}}):e._e()],1)})),0)})),0)],1)])},v=[],g={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var e=[];switch(this.type){case"1":e.push("*");break;case"2":e.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":e.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":e.push(this.appoint.join(","));break;case"6":e.push("".concat(0===this.last?"":this.last,"L"));break;default:e.push("?");break}return this.$emit("input",e.join("")),e.join("")}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},k=g,D=(a("4b3a"),Object(h["a"])(k,y,v,!1,null,null,null)),x=D.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{val:e.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("每日")])],1),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("不指定")])],1),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("周期")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.start,callback:function(t){e.$set(e.cycle,"start",t)},expression:"cycle.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("至")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:31,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.end,callback:function(t){e.$set(e.cycle,"end",t)},expression:"cycle.end"}}),e._v("\n    日\n  ")],1),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("循环")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.start,callback:function(t){e.$set(e.loop,"start",t)},expression:"loop.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("日开始，每")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.end,callback:function(t){e.$set(e.loop,"end",t)},expression:"loop.end"}}),e._v("\n    日执行一次\n  ")],1),a("div",[a("el-radio",{attrs:{label:"8",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("工作日")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("本月")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(t){e.type="8"}},model:{value:e.work,callback:function(t){e.work=t},expression:"work"}}),e._v("\n    号，最近的工作日\n  ")],1),a("div",[a("el-radio",{attrs:{label:"6",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("本月最后一天")])],1),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("指定")]),a("el-checkbox-group",{model:{value:e.appoint,callback:function(t){e.appoint=t},expression:"appoint"}},e._l(4,(function(t){return a("div",{key:t,staticStyle:{"margin-left":"10px","line-height":"25px"}},e._l(10,(function(l){return a("span",{key:l},[parseInt(t-1+""+(l-1))<32&&(1!==t||1!==l)?a("el-checkbox",{staticStyle:{"margin-right":"30px"},attrs:{label:t-1+""+(l-1)},on:{change:function(t){e.type="4"}}}):e._e()],1)})),0)})),0)],1)])},w=[],S={props:{value:{type:String,default:"?"}},data:function(){return{type:"5",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var e=[];switch(this.type){case"1":e.push("*");break;case"2":e.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":e.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":e.push(this.appoint.join(","));break;case"6":e.push("".concat(0===this.last?"":this.last,"L"));break;case"7":e.push("".concat(this.week.start,"#").concat(this.week.end));break;case"8":e.push("".concat(this.work,"W"));break;default:e.push("?");break}return this.$emit("input",e.join("")),e.join("")}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},L=S,_=(a("813a"),Object(h["a"])(L,N,w,!1,null,null,null)),j=_.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{val:e.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("每月")])],1),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("不指定")])],1),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("周期")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.start,callback:function(t){e.$set(e.cycle,"start",t)},expression:"cycle.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("至")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:12,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.end,callback:function(t){e.$set(e.cycle,"end",t)},expression:"cycle.end"}}),e._v("\n    月\n  ")],1),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("循环")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.start,callback:function(t){e.$set(e.loop,"start",t)},expression:"loop.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("月开始，每")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.end,callback:function(t){e.$set(e.loop,"end",t)},expression:"loop.end"}}),e._v("\n    月执行一次\n  ")],1),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("指定")]),a("el-checkbox-group",{staticStyle:{"margin-left":"0px","line-height":"25px"},model:{value:e.appoint,callback:function(t){e.appoint=t},expression:"appoint"}},e._l(12,(function(t){return a("el-checkbox",{key:t,attrs:{label:t},on:{change:function(t){e.type="4"}}})})),1)],1)])},$=[],O=(a("c5f6"),{props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var e=[];switch(this.type){case"1":e.push("*");break;case"2":e.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":e.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":e.push(this.appoint.join(","));break;case"6":e.push("".concat(0===this.last?"":this.last,"L"));break;default:e.push("?");break}return this.$emit("input",e.join("")),e.join("")}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",").map(Number)))}}}),q=O,C=(a("1777"),Object(h["a"])(q,T,$,!1,null,null,null)),V=C.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{val:e.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("每周")])],1),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("不指定")])],1),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("周期")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从星期")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.start,callback:function(t){e.$set(e.cycle,"start",t)},expression:"cycle.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("至星期")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:7,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.end,callback:function(t){e.$set(e.cycle,"end",t)},expression:"cycle.end"}})],1),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("循环")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从星期")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.start,callback:function(t){e.$set(e.loop,"start",t)},expression:"loop.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("开始，每")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(t){e.type="3"}},model:{value:e.loop.end,callback:function(t){e.$set(e.loop,"end",t)},expression:"loop.end"}}),e._v("\n    天执行一次\n  ")],1),a("div",[a("el-radio",{attrs:{label:"7",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("指定周")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("本月第")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:4,size:"mini"},on:{change:function(t){e.type="7"}},model:{value:e.week.start,callback:function(t){e.$set(e.week,"start",t)},expression:"week.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("周，星期")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(t){e.type="7"}},model:{value:e.week.end,callback:function(t){e.$set(e.week,"end",t)},expression:"week.end"}})],1),a("div",[a("el-radio",{attrs:{label:"6",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("本月最后一个")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("星期")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(t){e.type="6"}},model:{value:e.last,callback:function(t){e.last=t},expression:"last"}})],1),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("指定")]),a("el-checkbox-group",{staticStyle:{"margin-left":"50px","line-height":"25px"},model:{value:e.appoint,callback:function(t){e.appoint=t},expression:"appoint"}},e._l(7,(function(t){return a("el-checkbox",{key:t,attrs:{label:t},on:{change:function(t){e.type="4"}}})})),1)],1)])},z=[],I={props:{value:{type:String,default:"?"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var e=[];switch(this.type){case"1":e.push("*");break;case"2":e.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":e.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":e.push(this.appoint.join(","));break;case"6":e.push("".concat(0===this.last?"":this.last,"L"));break;case"7":e.push("".concat(this.week.start,"#").concat(this.week.end));break;default:e.push("?");break}return this.$emit("input",e.join("")),e.join("")}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",").map(Number)))}}},R=I,J=(a("da0c"),Object(h["a"])(R,F,z,!1,null,null,null)),W=J.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{val:e.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("每年")])],1),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("不指定")])],1),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("周期")]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[e._v("从")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2e3,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.start,callback:function(t){e.$set(e.cycle,"start",t)},expression:"cycle.start"}}),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v("至")]),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2e3,size:"mini"},on:{change:function(t){e.type="2"}},model:{value:e.cycle.end,callback:function(t){e.$set(e.cycle,"end",t)},expression:"cycle.end"}}),e._v("\n    年\n  ")],1)])},E=[],A={props:{value:{type:String,default:"*"}},data:function(){var e=(new Date).getFullYear();return{type:"1",cycle:{start:e,end:e},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var e=[];switch(this.type){case"1":e.push("*");break;case"2":e.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":e.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":e.push(this.appoint.join(","));break;case"6":e.push("".concat(0===this.last?"":this.last,"L"));break;default:e.push("?");break}return this.$emit("input",e.join("")),e.join("")}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},P=A,B=(a("a6a9"),Object(h["a"])(P,M,E,!1,null,null,null)),U=B.exports,G={components:{SecondAndMinute:f,hour:x,day:j,month:V,week:W,year:U},props:{value:{type:String}},data:function(){return{RecentTriggerTimes:[],RecentTriggerTime:5,activeName:"s",sVal:"",mVal:"",hVal:"",dVal:"",monthVal:"",weekVal:"",yearVal:"",cron:""}},computed:{tableData:function(){return[{sVal:this.sVal,mVal:this.mVal,hVal:this.hVal,dVal:this.dVal,monthVal:this.monthVal,weekVal:this.weekVal,yearVal:this.yearVal}]},value_:function(){if(!this.dVal&&!this.weekVal)return"";if("?"===this.dVal&&"?"===this.weekVal)return this.$message.error("日期与星期不可以同时为“不指定”"),"";if("?"!==this.dVal&&"?"!==this.weekVal)return this.$message.error("日期与星期必须有一个为“不指定”"),"";var e="".concat(this.sVal," ").concat(this.mVal," ").concat(this.hVal," ").concat(this.dVal," ").concat(this.monthVal," ").concat(this.weekVal," ").concat(this.yearVal);return console.log("我进来到vaule_"+e),e!==this.value&&(this.cron=e,this.getRecentTriggerTime(this.RecentTriggerTime),this.$emit("input",e)),e}},watch:{value:function(e,t){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){console.log("进来了"),console.log("getRecentTriggerTime1111"+this.value)},getRecentTriggerTime:function(e){var t=this;this.RecentTriggerTime=e,console.log(this.cron),Object(i["a"])({url:"/utils/getCronRecentTriggerTime",methods:"get",params:{cron:this.cron.replace(/s/g,"%2B"),time:this.RecentTriggerTime}}).then((function(e){console.log(e),t.RecentTriggerTimes=e.data})).catch((function(e){console.log("==================="),console.log(e)}))}}},Y=G,K=(a("3bb7"),Object(h["a"])(Y,r,c,!1,null,null,null)),X=K.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"elx-transfer",staticStyle:{width:"100%"}},[a("div",{staticClass:"elx-transfer-left",staticStyle:{width:"40%"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},model:{value:e.query1.modelName,callback:function(t){e.$set(e.query1,"modelName",t)},expression:"query1.modelName"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:e.getData},slot:"suffix"})]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1},on:{"selection-change":e.handleSelectionChange1}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"modelName",label:"模型名称"}}),a("el-table-column",{attrs:{prop:"state",label:"状态"}})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.pageTotal1},on:{"current-change":e.handleCurrentChange1}})],1)],1),a("div",{staticClass:"elx-transfer-operate",staticStyle:{width:"10%"}},[a("div",{staticClass:"button-group"},[a("el-button",{nativeOn:{click:function(t){return e.transferRight(t)}}},[a("span",{staticClass:"el-icon-right"})])],1)]),a("div",{staticClass:"elx-transfer-right",staticStyle:{width:"40%"},attrs:{val:e.value_}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,height:"300"},on:{"selection-change":e.handleSelectionChange2}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"modelName",label:"模型名称"}}),a("el-table-column",{attrs:{prop:"state",label:"状态"}}),a("el-table-column",{attrs:{label:"操作",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete-solid",circle:""},on:{click:function(a){return e.deleteData(t.row)}}})]}}])})],1)],1)])},Q=[],Z=a("2909"),ee={name:"tabs",data:function(){return{multipleSelection1:[],pageTotal1:0,tableData1:[],query1:{pageIndex:1,pageSize:5,modelName:""},multipleSelection2:[],pageTotal2:0,tableData2:[]}},computed:{value_:function(){var e="";this.tableData2.forEach((function(t){e+=t.modelName+":"+t.dsName+":"+t.modelSchema+","})),this.$emit("input",e)}},created:function(){this.getData()},methods:{handleCurrentChange1:function(e){this.query1.pageIndex=e,this.getData(),console.log("当前页: ".concat(e))},handleSelectionChange1:function(e){this.multipleSelection1=e,console.log(this.multipleSelection1)},handleSelectionChange2:function(e){this.multipleSelection2=e,console.log(this.multipleSelection2)},deleteData:function(e){console.log(e.modelId),this.tableData2=this.tableData2.filter((function(t){return t.modelId!==e.modelId})),this.pageTotal2--},transferRight:function(){var e;(e=this.tableData2).push.apply(e,Object(Z["a"])(this.multipleSelection1)),this.tableData2=this.tableData2.filter((function(e,t,a){return a.indexOf(e)==t}));var t=["c1_c2_c3","c4_c5_c6","c1_c2_c3","c4_c5_c6"];t=t.filter((function(e,t,a){return a.indexOf(e)==t})),console.log(t),this.pageTotal2=this.tableData2.length,console.log("=========="),console.log(this.tableData2)},getData:function(){var e=this;Object(i["a"])({url:"/model/getModelList",methods:"get",params:{modelName:this.query1.modelName,teamName:this.$store.state.personInfo.currentTeam.teamName,pageNum:this.query1.pageIndex,pageSize:this.query1.pageSize}}).then((function(t){e.tableData1=t.data,e.pageTotal1=t.dataLength,console.log(t)})).catch((function(e){console.log("==================="),console.log(e)}))}}},te=ee,ae=(a("3bd4"),Object(h["a"])(te,H,Q,!1,null,null,null)),le=ae.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{disabled:"show"===e.openType},on:{click:function(t){return e.saveJobDepend()}}},[e._v("保存")]),a("el-table",{attrs:{data:e.dependList}},[a("el-table-column",{attrs:{prop:"dependName",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!0},model:{value:t.row.jobName,callback:function(a){e.$set(t.row,"jobName",a)},expression:"scope.row.jobName"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-delete",attrs:{title:"移除任务"},on:{click:function(a){return e.removeJob(t.row.jobName)}}})]}}])})],1)],1)},ie=[],ne={props:{openType:String,jobName:String,inputTabs:String},name:"Depend",data:function(){return{dependList:[],outputTabs:String}},created:function(){"show"===this.openType?this.getJobDepend():this.computedJobDepend()},methods:{saveJobDepend:function(){var e=[];this.dependList.forEach((function(t){e.push(t.jobName)})),Object(i["a"])({url:"/job/saveJobDepend",methods:"get",params:{jobName:this.jobName,dependList:e.toString()}}).then((function(e){})).catch((function(e){}))},removeJob:function(e){this.dependList=this.dependList.filter((function(t){return t.jobName!==e}))},computedJobDepend:function(){var e=this;Object(i["a"])({url:"/job/computedJobDepend",methods:"get",params:{inputDataList:this.inputTabs}}).then((function(t){e.dependList=t.data})).catch((function(e){}))},getJobDepend:function(){var e=this;Object(i["a"])({url:"/job/getJobDepend",methods:"get",params:{jobName:this.jobName}}).then((function(t){var a,l=[];t.data.forEach((function(e){l.push({jobName:e.dependName})})),(a=e.dependList).push.apply(a,l),t.data.filter((function(e,a){return t.data.indexOf(e,0)===a}))})).catch((function(e){}))}}},oe=ne,re=(a("0933"),Object(h["a"])(oe,se,ie,!1,null,"35c735c7",null)),ce=re.exports,ue={props:{jobName:String,openType:String},components:{depend:ce,cron:X,tabs:le},data:function(){return{ruleForm:{depends:"",inputTabs:"",outputTabs:"",state:"",jobName:"",jobLabel:"",cron:"",startDate:"",endDate:"",emails:"",retryCount:""},editCronDialogVisible:!1,editInputTabsDialogVisible:!1,editOutputTabsDialogVisible:!1,editDependsTabsDialogVisible:!1}},created:function(){this.getJobInfoByJobName()},methods:{getJobInfoByJobName:function(){var e=this;Object(i["a"])({url:"/job/getJobInfoByJobName",methods:"get",params:{jobName:this.jobName}}).then((function(t){e.ruleForm=t.data})).catch((function(e){}))},saveJobData:function(){var e=this;console.log(this.ruleForm),Object(i["b"])("/job/saveJobData",{jonData:JSON.stringify(this.ruleForm)}).then((function(t){console.log(t),100!=t.status?e.$notify({title:"成功",message:"保存成功",type:"success"}):e.$message({message:"保存失败"+t.message,type:"warning"})})).catch((function(e){}))}}},pe=ue,me=Object(h["a"])(pe,n,o,!1,null,null,null),de=me.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"success",disabled:"show"===e.openType},on:{click:e.saveGraph}},[e._v("保存")]),a("el-button",{attrs:{type:"success"},on:{click:e.removeAll}},[e._v("清空组件")]),a("el-tabs",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"画板",name:"first"}},[a("div",{staticClass:"super-flow-demo1"},[a("div",{staticClass:"node-container"},e._l(e.nodeItemList,(function(t){return a("span",{staticClass:"node-item",on:{mousedown:function(a){return e.nodeItemMouseDown(a,t.value)}}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),0),a("div",{ref:"flowContainer",staticClass:"flow-container"},[a("super-flow",{ref:"superFlow",attrs:{"graph-menu":e.graphMenu,"node-menu":e.nodeMenu,"link-menu":e.linkMenu,"link-base-style":e.linkBaseStyle,"link-style":e.linkStyle,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var l=t.meta;return[a("div",{staticClass:"flow-node ellipsis",on:{mouseup:e.nodeMouseUp,click:e.nodeClick}},[e._v("\n                                "+e._s(l.label)+"\n                            ")])]}}])})],1)])]),a("el-tab-pane",{attrs:{label:"列表",name:"second"}},[a("el-tabs",{model:{value:e.activePlugTabName,callback:function(t){e.activePlugTabName=t},expression:"activePlugTabName"}},e._l(e.plugDataList,(function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.label}},["mysqlReader"===t.meta.name?a("mysql-reader",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e(),"mysqlWriter"===t.meta.name?a("mysql-writer",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e(),"parameters"===t.meta.name?a("parameters",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e(),"SftpToSftp"===t.meta.name?a("sftp-to-sftp",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e(),"OssToSftp"===t.meta.name?a("oss-to-sftp",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e(),"mongodbReader"===t.meta.name?a("mongodb-reader",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e(),"Cmd"===t.meta.name?a("Cmd",{attrs:{data:t.data},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}}):e._e()],1)})),1)],1)],1)],1)},be=[],fe=(a("8e6e"),a("ac4d"),a("8a81"),a("1c4c"),a("6b54"),a("ade3"));a("456d");function ye(e){if(Array.isArray(e))return e}function ve(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],l=!0,s=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(l=(n=o.next()).done);l=!0)if(a.push(n.value),t&&a.length===t)break}catch(r){s=!0,i=r}finally{try{l||null==o["return"]||o["return"]()}finally{if(s)throw i}}return a}}var ge=a("06c5");function ke(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function De(e,t){return ye(e)||ve(e,t)||Object(ge["a"])(e,t)||ke()}a("55dd"),a("5df3"),a("f400"),a("7f7f");var xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",val:e.mysqlReaderData}},[a("el-form-item",{attrs:{label:"数据源",prop:"dsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},on:{change:e.setDsName},model:{value:e.mysqlReaderData.dsName,callback:function(t){e.$set(e.mysqlReaderData,"dsName",t)},expression:"mysqlReaderData.dsName"}},e._l(e.dsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"模式名",prop:"dsSchema"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:e.mysqlReaderData.dsSchema,callback:function(t){e.$set(e.mysqlReaderData,"dsSchema",t)},expression:"mysqlReaderData.dsSchema"}},e._l(e.dsSchemaListData,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.mysqlReaderData.tableName,callback:function(t){e.$set(e.mysqlReaderData,"tableName",t)},expression:"mysqlReaderData.tableName"}})],1),a("el-form-item",{attrs:{label:"sql语句",prop:"sql"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:""},model:{value:e.mysqlReaderData.sql,callback:function(t){e.$set(e.mysqlReaderData,"sql",t)},expression:"mysqlReaderData.sql"}}),a("el-button",[e._v("格式化sql")])],1),a("el-form-item",{attrs:{label:"字段列表",prop:"columns"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:""},model:{value:e.mysqlReaderData.columns,callback:function(t){e.$set(e.mysqlReaderData,"columns",t)},expression:"mysqlReaderData.columns"}})],1),a("el-form-item",{attrs:{label:"where条件",prop:"where"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:""},model:{value:e.mysqlReaderData.where,callback:function(t){e.$set(e.mysqlReaderData,"where",t)},expression:"mysqlReaderData.where"}})],1)],1)],1)},Ne=[],we=(a("9612"),{name:"mysqlReader",props:{mysqlReaderKey:String,data:{type:Object}},data:function(){return{value:{type:Object},dsDataList:[],dsSchemaListData:[],mysqlReaderData:{key:"",label:"mysqlReader",name:"mysqlReader_",dsName:"",tableName:"",dsSchema:"",sql:"",columns:"reader",where:""}}},created:function(){this.getMysqlDsList(),this.mysqlReaderData={key:this.data.key,label:this.data.label,name:this.data.name,dsName:this.data.dsName,tableName:this.data.tableName,dsSchema:this.data.dsSchema,sql:this.data.sql,columns:this.data.columns,where:this.data.where}},watch:{mysqlReaderData:{handler:function(e,t){console.log(this.mysqlReaderData),this.$emit("input",this.mysqlReaderData)},deep:!0}},methods:{setDsName:function(){var e=this,t=this.dsDataList.filter((function(t){return t.dsName==e.mysqlReaderData.dsName}))[0];this.mysqlReaderData.dsSchema="",this.dsSchemaListData=t.dsSchema.split("|")[0].split(","),this.mysqlReaderData.dsSchema=this.dsSchemaListData[0]},getMysqlReaderData:function(){this.mysqlReaderData.key=this.mysqlWriterKey,this.$emit("mysqlReaderData",this.mysqlReaderData,this.mysqlReaderKey)},getMysqlDsList:function(){var e=this;Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"mysql"}}).then((function(t){console.log(t),e.dsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}}}),Se=we,Le=Object(h["a"])(Se,xe,Ne,!1,null,null,null),_e=Le.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",val:e.mongodbreaderData}},[a("el-form-item",{attrs:{label:"数据源",prop:"dsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},on:{change:e.setDsName},model:{value:e.mongodbreaderData.dsName,callback:function(t){e.$set(e.mongodbreaderData,"dsName",t)},expression:"mongodbreaderData.dsName"}},e._l(e.dsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"模式名",prop:"dsSchema"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:e.mongodbreaderData.dsSchema,callback:function(t){e.$set(e.mongodbreaderData,"dsSchema",t)},expression:"mongodbreaderData.dsSchema"}},e._l(e.dsSchemaListData,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"集合名",prop:"collectionName"}},[a("el-input",{model:{value:e.mongodbreaderData.collectionName,callback:function(t){e.$set(e.mongodbreaderData,"collectionName",t)},expression:"mongodbreaderData.collectionName"}})],1),a("el-button",{on:{click:e.addColumn}},[e._v("添加字段")]),a("el-form-item",{attrs:{label:"字段",prop:"column"}},[a("el-table",{attrs:{data:e.mongodbreaderData.column}},[a("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.mongodbTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"delete",label:"删除字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.deleteColumn(t.row.name)}}},[e._v("删除字段")])]}}])})],1)],1)],1)],1)},Te=[],$e={name:"mongodbReader",props:{mysqlReaderKey:String,data:{type:Object}},data:function(){return{value:{type:Object},mongodbTypeList:["String","int","Long","double","array","date","boolean","bytes"],dsDataList:[],dsSchemaListData:[],mongodbreaderData:Object(fe["a"])({key:"",label:"mongodbReader",name:"mongodbReader",dsName:"",column:[],collectionName:"",dsSchema:""},"collectionName","")}},created:function(){this.getMysqlDsList(),this.mongodbreaderData={key:this.data.key,label:this.data.label,name:this.data.name,dsName:this.data.dsName,column:JSON.parse(this.data.column),dsSchema:this.data.dsSchema,collectionName:this.data.collectionName}},watch:{mongodbreaderData:{handler:function(e,t){console.log(this.mongodbreaderData);var a=JSON.stringify(this.mongodbreaderData.column);this.mongodbreaderData.columnList=a,this.$emit("input",this.mongodbreaderData)},deep:!0}},methods:{deleteColumn:function(e){this.mongodbreaderData.column=this.mongodbreaderData.column.filter((function(t){return t.name!=e}))},addColumn:function(){this.mongodbreaderData.column.push({name:"",type:""})},setDsName:function(){var e=this,t=this.dsDataList.filter((function(t){return t.dsName==e.mongodbreaderData.dsName}))[0];this.mongodbreaderData.dsSchema="",this.dsSchemaListData=t.dsSchema.split("|")[0].split(","),this.mongodbreaderData.dsSchema=this.dsSchemaListData[0]},getMysqlDsList:function(){var e=this;Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"mongodb"}}).then((function(t){console.log(t),e.dsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}}},Oe=$e,qe=Object(h["a"])(Oe,je,Te,!1,null,null,null),Ce=qe.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",val:e.mysqlWriterData}},[a("el-form-item",{attrs:{label:"数据源",prop:"dsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},on:{change:e.setDsName},model:{value:e.mysqlWriterData.dsName,callback:function(t){e.$set(e.mysqlWriterData,"dsName",t)},expression:"mysqlWriterData.dsName"}},e._l(e.dsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"模式名",prop:"dsSchema"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:e.mysqlWriterData.dsSchema,callback:function(t){e.$set(e.mysqlWriterData,"dsSchema",t)},expression:"mysqlWriterData.dsSchema"}},e._l(e.dsSchemaListData,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.mysqlWriterData.tableName,callback:function(t){e.$set(e.mysqlWriterData,"tableName",t)},expression:"mysqlWriterData.tableName"}})],1),a("el-form-item",{attrs:{label:"字段列表",prop:"columns"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:""},model:{value:e.mysqlWriterData.columns,callback:function(t){e.$set(e.mysqlWriterData,"columns",t)},expression:"mysqlWriterData.columns"}})],1),a("el-form-item",{attrs:{label:"前置sql",prop:"preSql"}},[a("el-input",{attrs:{type:"textarea",rows:2,autosize:""},model:{value:e.mysqlWriterData.preSql,callback:function(t){e.$set(e.mysqlWriterData,"preSql",t)},expression:"mysqlWriterData.preSql"}})],1)],1)],1)},Fe=[],ze={props:{mysqlWriterKey:String,value:{type:Object},data:{type:Object}},name:"mysqlWriter",data:function(){return{dsDataList:[],dsSchemaListData:[],mysqlWriterData:{key:"",label:"mysqlWriter",name:"mysqlWriter_",dsName:"",tableName:"",dsSchema:"",preSql:"",columns:"writer"}}},created:function(){this.getMysqlDsList(),this.mysqlWriterData={key:this.data.key,label:this.data.label,name:this.data.name,dsName:this.data.dsName,tableName:this.data.tableName,dsSchema:this.data.dsSchema,preSql:this.data.preSql,columns:this.data.columns}},computed:{},watch:{mysqlWriterData:{handler:function(e,t){console.log(this.mysqlWriterData),this.$emit("input",this.mysqlWriterData)},deep:!0}},methods:{setDsName:function(){var e=this,t=this.dsDataList.filter((function(t){return t.dsName==e.mysqlWriterData.dsName}))[0];this.mysqlWriterData.dsSchema="",this.dsSchemaListData=t.dsSchema.split("|")[0].split(","),this.mysqlWriterData.dsSchema=this.dsSchemaListData[0]},getMysqlWriterData:function(){this.mysqlWriterData.key=this.mysqlWriterKey},getMysqlDsList:function(){var e=this;Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"mysql"}}).then((function(t){console.log(t),e.dsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}}},Ie=ze,Re=Object(h["a"])(Ie,Ve,Fe,!1,null,null,null),Je=Re.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"参数"},model:{value:e.parameters.parameterList,callback:function(t){e.$set(e.parameters,"parameterList",t)},expression:"parameters.parameterList"}})},Me=[],Ee={props:{value:{type:Object},data:{type:Object}},name:"Parameters",data:function(){return{parameters:{parameterList:""}}},created:function(){this.parameters={parameterList:this.data.parameterList}},watch:{parameters:{handler:function(e,t){console.log(this.parameters),this.$emit("input",this.parameters)},deep:!0}}},Ae=Ee,Pe=Object(h["a"])(Ae,We,Me,!1,null,"56ac5ce9",null),Be=Pe.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",val:e.sftpData}},[a("el-form-item",{attrs:{label:"源Sftp",prop:"sourceDsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},model:{value:e.sftpData.sourceDsName,callback:function(t){e.$set(e.sftpData,"sourceDsName",t)},expression:"sftpData.sourceDsName"}},e._l(e.dsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"目标Sftp",prop:"targetDsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},model:{value:e.sftpData.targetDsName,callback:function(t){e.$set(e.sftpData,"targetDsName",t)},expression:"sftpData.targetDsName"}},e._l(e.dsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"目标路径",prop:"targetFilePath"}},[a("el-input",{model:{value:e.sftpData.targetFilePath,callback:function(t){e.$set(e.sftpData,"targetFilePath",t)},expression:"sftpData.targetFilePath"}})],1),a("el-form-item",{attrs:{label:"文件名",prop:"fileNameList"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.sftpData.fileNameList,callback:function(t){e.$set(e.sftpData,"fileNameList",t)},expression:"sftpData.fileNameList"}})],1)],1)],1)},Ge=[],Ye={name:"SftpToSftp",props:{value:{type:Object},data:{type:Object}},data:function(){return{dsDataList:[],sftpData:{key:"",label:"SftpToSftp",name:"SftpToSftp",sourceDsName:"",targetDsName:"",fileNameList:"",targetFilePath:""}}},created:function(){this.getSftpDsList(),this.sftpData={key:"",label:"SftpToSftp",name:"SftpToSftp",sourceDsName:this.data.sourceDsName,targetDsName:this.data.targetDsName,targetFilePath:this.data.targetFilePath,fileNameList:this.data.fileNameList}},watch:{sftpData:{handler:function(e,t){console.log(this.sftpData),this.$emit("input",this.sftpData)},deep:!0}},methods:{getSftpDsList:function(){var e=this;Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"sftp"}}).then((function(t){e.dsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}}},Ke=Ye,Xe=Object(h["a"])(Ke,Ue,Ge,!1,null,null,null),He=Xe.exports,Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",val:e.ossData}},[a("el-form-item",{attrs:{label:"oss数据源",prop:"sourceDsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},model:{value:e.ossData.sourceDsName,callback:function(t){e.$set(e.ossData,"sourceDsName",t)},expression:"ossData.sourceDsName"}},e._l(e.ossDsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"目标Sftp",prop:"targetDsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},model:{value:e.ossData.targetDsName,callback:function(t){e.$set(e.ossData,"targetDsName",t)},expression:"ossData.targetDsName"}},e._l(e.sftpDsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"目标路径",prop:"targetFilePath"}},[a("el-input",{model:{value:e.ossData.targetFilePath,callback:function(t){e.$set(e.ossData,"targetFilePath",t)},expression:"ossData.targetFilePath"}})],1),a("el-form-item",{attrs:{label:"文件名",prop:"fileNameList"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.ossData.fileNameList,callback:function(t){e.$set(e.ossData,"fileNameList",t)},expression:"ossData.fileNameList"}})],1)],1)],1)},Ze=[],et={name:"OssToSftp",props:{value:{type:Object},data:{type:Object}},data:function(){return{ossDsDataList:[],sftpDsDataList:[],ossData:{key:"",label:"OssToSftp",name:"OssToSftp",sourceDsName:"",targetDsName:"",fileNameList:"",targetFilePath:""}}},created:function(){this.getDsList(),this.ossData={key:"",label:"OssToSftp",name:"OssToSftp",sourceDsName:this.data.sourceDsName,targetDsName:this.data.targetDsName,targetFilePath:this.data.targetFilePath,fileNameList:this.data.fileNameList}},watch:{ossData:{handler:function(e,t){console.log(this.ossData),this.$emit("input",this.ossData)},deep:!0}},methods:{getDsList:function(){var e=this;Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"oss"}}).then((function(t){e.ossDsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)})),Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"sftp"}}).then((function(t){e.sftpDsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}}},tt=et,at=Object(h["a"])(tt,Qe,Ze,!1,null,null,null),lt=at.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",val:e.cmdData}},[a("el-form-item",{attrs:{label:"文件源",prop:"sourceDsName"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{filterable:"",clearable:""},model:{value:e.cmdData.sourceDsName,callback:function(t){e.$set(e.cmdData,"sourceDsName",t)},expression:"cmdData.sourceDsName"}},e._l(e.dsDataList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dsName,value:e.dsName}})})),1)],1),a("el-form-item",{attrs:{label:"文件名",prop:"fileName"}},[a("el-input",{attrs:{rows:3},model:{value:e.cmdData.fileName,callback:function(t){e.$set(e.cmdData,"fileName",t)},expression:"cmdData.fileName"}})],1),a("el-form-item",{attrs:{label:"执行命令",prop:"cmd"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.cmdData.cmdLine,callback:function(t){e.$set(e.cmdData,"cmdLine",t)},expression:"cmdData.cmdLine"}})],1)],1)],1)},it=[],nt={name:"cmd",props:{value:{type:Object},data:{type:Object}},data:function(){return{dsDataList:[],cmdData:{key:"",label:"cmd",name:"执行脚本",sourceDsName:"",fileName:"",cmdLine:""}}},created:function(){this.getOssDsList(),this.cmdData={key:"",label:"cmd",name:"执行脚本",sourceDsName:this.data.sourceDsName,fileName:this.data.fileName,cmdLine:this.data.cmdLine}},watch:{cmdData:{handler:function(e,t){console.log(this.cmdData),this.$emit("input",this.cmdData)},deep:!0}},methods:{getOssDsList:function(){var e=this;Object(i["a"])({url:"/ds/getDsListByTeamNameAndDsType",methods:"get",params:{teamName:this.$store.state.personInfo.currentTeam.teamName,dsType:"oss"}}).then((function(t){e.dsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}}},ot=nt,rt=Object(h["a"])(ot,st,it,!1,null,null,null),ct=rt.exports;function ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(a),!0).forEach((function(t){Object(fe["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ut(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function mt(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=dt(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var l=0,s=function(){};return{s:s,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,i=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw i}}}}function dt(e,t){if(e){if("string"===typeof e)return ht(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ht(e,t):void 0}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}var bt={node:0,link:1},ft={props:{jobName:String,openType:String},components:{mysqlReader:_e,mysqlWriter:Je,parameters:Be,SftpToSftp:He,OssToSftp:lt,MongodbReader:Ce,Cmd:ct},created:function(){void 0===this.jobName||this.getPlugData()},data:function(){var e=this;return{linkArray:[],activeTabName:"first",activePlugTabName:"",plugDataList:[],drawerType:bt,drawerConf:{title:"",visible:!1,type:null,info:null,open:function(t,a){var l=e.drawerConf;l.visible=!0,l.type=t,l.info=a,l.type===bt.node?(l.title="节点",e.$refs.nodeSetting&&e.$refs.nodeSetting.resetFields(),e.$set(e.nodeSetting,"name",a.meta.name),e.$set(e.nodeSetting,"desc",a.meta.desc)):(l.title="连线",e.$refs.linkSetting&&e.$refs.linkSetting.resetFields(),e.$set(e.linkSetting,"desc",a.meta?a.meta.desc:""))},cancel:function(){e.drawerConf.visible=!1,e.drawerConf.type===bt.node?e.$refs.nodeSetting.clearValidate():e.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},dragConf:{isDown:!1,isMove:!1,offsetTop:0,offsetLeft:0,clientX:0,clientY:0,ele:null,info:null},nodeItemList:[{label:"mysql加载",value:{width:120,height:40,meta:{label:"mysql加载",name:"mysqlWriter"}}},{label:"mongodb读取",value:{width:120,height:40,meta:{label:"mongodb读取",name:"mongodbReader"}}},{label:"mysql读取",value:{width:120,height:40,meta:{label:"mysql读取",name:"mysqlReader"}}},{label:"If条件",value:{width:120,height:40,meta:{label:"If条件",name:"If"}}},{label:"IfEnd条件",value:{width:120,height:40,meta:{label:"IfEnd条件",name:"IfEnd"}}},{label:"参数设置",value:{width:120,height:40,meta:{label:"参数设置",name:"parameters"}}},{label:"SftpToSftp",value:{width:120,height:40,meta:{label:"SftpToSftp",name:"SftpToSftp"}}},{label:"OssToSftp",value:{width:120,height:40,meta:{label:"OssToSftp",name:"OssToSftp"}}},{label:"Cmd",value:{width:120,height:40,meta:{label:"Cmd",name:"Cmd"}}}],graphMenu:[[{label:"全选",selected:function(e){e.selectAll()}}]],nodeMenu:[[{label:"删除",selected:function(t){t.remove(),e.removePlug(t)}},{label:"编辑",selected:function(t){e.drawerConf.open(bt.node,t)}}]],linkMenu:[],linkBaseStyle:{color:"#666666",hover:"#FF0000",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},fontList:["14px Arial","italic small-caps bold 12px arial"]}},mounted:function(){var e=this;document.addEventListener("mousemove",this.docMousemove),document.addEventListener("mouseup",this.docMouseup),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("mousemove",e.docMousemove),document.removeEventListener("mouseup",e.docMouseup)}))},methods:{checkGraph:function(){console.log(this.$refs.superFlow.toJSON());var e=this.$refs.superFlow.toJSON(),t=e.linkList,a=e.linkList.length,l=e.nodeList;console.log(l),console.log(t);var s=e.nodeList.length;if(s-a===1){if(!(s<=1)){var i=new Map,n=new Map;t.forEach((function(e){i.set(e.startId,e.endId),n.set(e.endId,e.startId)})),this.linkArray=[],this.linkArray.push(t[0].startId),console.log(i),console.log(n),this.preLink(i),this.nextLink(n);for(var o=0;o<this.plugDataList.length;o++)for(var r=this.plugDataList[o],c=0;c<this.linkArray.length;c++){var u=this.linkArray[c];r.id===u&&(r.num=c)}return console.log(this.plugDataList),this.plugDataList.sort((function(e,t){return e.num-t.num})),console.log(this.linkArray),!0}}else this.$message.error("错了哦，检查是否有环路")},saveGraph:function(){var e=this,t=this.checkGraph();if(t){for(var a=this.$refs.superFlow.toJSON(),l=a.linkList,s=0;s<this.plugDataList.length;s++)if("mongodbReader"===this.plugDataList[s].meta.name){this.plugDataList[s].data.column=JSON.stringify(this.plugDataList[s].data.column);break}Object(i["b"])("/plug/saveGraphData",{plugData:JSON.stringify(this.plugDataList),linkList:JSON.stringify(l),jobName:this.jobName}).then((function(t){console.log(t),e.dsDataList=t.data})).catch((function(e){console.log("==================="),console.log(e)}))}},preLink:function(e){var t,a=mt(e);try{for(a.s();!(t=a.n()).done;){var l=De(t.value,2),s=l[0],i=l[1];console.log(s+" = "+i),i===this.linkArray[0]&&(this.linkArray.unshift(s),e.delete(s),this.preLink(e))}}catch(n){a.e(n)}finally{a.f()}},nextLink:function(e){var t,a=mt(e);try{for(a.s();!(t=a.n()).done;){var l=De(t.value,2),s=l[0],i=l[1];console.log(s+" = "+i),i===this.linkArray[this.linkArray.length-1]&&(this.linkArray.push(s),e.delete(s),this.nextLink(e))}}catch(n){a.e(n)}finally{a.f()}},getPlugData:function(){var e=this;Object(i["a"])({url:"/plug/getGraphData",methods:"get",params:{jobName:this.jobName}}).then((function(t){console.log(t),e.setGraph(t.data)})).catch((function(e){console.log("==================="),console.log(e)}))},setGraph:function(e){var t,a=JSON.parse(e.linkData),l=JSON.parse(e.plungData);(t=this.plugDataList).push.apply(t,Object(Z["a"])(l)),console.log("============================="),console.log(a),console.log(l),console.log("============================="),this.setGraphLink(a),console.log("============================="),this.setGraphPlug(l)},removePlug:function(e){console.log(e),this.plugDataList=this.plugDataList.filter((function(t){return t.id!==e.id}))},removeAll:function(){console.log(this.$refs.superFlow),this.plugDataList=[],this.$refs.superFlow.linkList=[],this.$refs.superFlow.nodeList=[]},setGraphPlug:function(e){var t=this;e.forEach((function(e){t.dragConf;console.log("ele"),console.log(e),t.$refs.superFlow.addNode({coordinate:e.coordinate,data:e.data,height:e.height,id:e.id,label:e.label,meta:e.meta,num:e.num,width:e.width})}))},setGraphLink:function(e){var t;console.log((t=this.$refs.superFlow.linkList).push.apply(t,Object(Z["a"])(e)))},flowNodeClick:function(e){console.log(this.$refs.superFlow.graph)},linkStyle:function(e){return{}},linkDesc:function(e){return e.meta?e.meta.desc:""},settingSubmit:function(){var e=this,t=this.drawerConf;this.drawerConf.type===bt.node?(t.info.meta||(t.info.meta={}),Object.keys(this.nodeSetting).forEach((function(a){e.$set(t.info.meta,a,e.nodeSetting[a])})),this.$refs.nodeSetting.resetFields()):(t.info.meta||(t.info.meta={}),Object.keys(this.linkSetting).forEach((function(a){e.$set(t.info.meta,a,e.linkSetting[a])})),this.$refs.linkSetting.resetFields()),t.visible=!1},nodeMouseUp:function(e){e.preventDefault()},nodeClick:function(){console.log(arguments)},docMousemove:function(e){var t=e.clientX,a=e.clientY,l=this.dragConf;l.isMove?(l.ele.style.top=a-l.offsetTop+"px",l.ele.style.left=t-l.offsetLeft+"px"):l.isDown&&(l.isMove=Math.abs(t-l.clientX)>5||Math.abs(a-l.clientY)>5)},docMouseup:function(e){var t=this,a=e.clientX,l=e.clientY,s=this.dragConf;if(s.isDown=!1,s.isMove){var i=this.$refs.flowContainer.getBoundingClientRect(),n=i.top,o=i.right,r=i.bottom,c=i.left;if(a>c&&a<o&&l>n&&l<r){var u=this.$refs.superFlow.getMouseCoordinate(a-s.offsetLeft,l-s.offsetTop);console.log("coordinate"),console.log(u),console.log("conf.info"),console.log(s.info),this.$refs.superFlow.addNode(pt({coordinate:u},s.info));var p=this.$refs.superFlow.toJSON();p.nodeList.forEach((function(e){for(var a=!0,l=0;l<t.plugDataList.length;l++)e.id===t.plugDataList[l].id&&(t.plugDataList[l].coordinate=e.coordinate,a=!1);a&&t.plugDataList.push(pt(pt({coordinate:u},s.info),{},{num:0,data:{},label:s.info.meta.label,id:e.id}))}))}s.isMove=!1}s.ele&&(s.ele.remove(),s.ele=null)},nodeItemMouseDown:function(e,t){var a=e.clientX,l=e.clientY,s=e.currentTarget,i=e.currentTarget.getBoundingClientRect(),n=i.top,o=i.left,r=this.dragConf,c=s.cloneNode(!0);Object.assign(this.dragConf,{offsetLeft:a-o,offsetTop:l-n,clientX:a,clientY:l,info:t,ele:c,isDown:!0}),c.style.position="fixed",c.style.margin="0",c.style.top=l-r.offsetTop+"px",c.style.left=a-r.offsetLeft+"px",this.$el.appendChild(this.dragConf.ele)}}},yt=ft,vt=(a("e65e"),Object(h["a"])(yt,he,be,!1,null,null,null)),gt=vt.exports,kt={name:"JobList",components:{jobInfo:de,Graph:gt,depend:ce},data:function(){return{tableData:[],query:{state:"",pageIndex:1,pageSize:10,jobName:"",jobLabel:"",teamName:this.$store.state.personInfo.currentTeam.teamName,lastUserName:""},pageTotal:0,activeJobName:"jobList",jobInfoDataList:[],currentJobName:""}},created:function(){this.getJobList()},methods:{removeTab:function(e){var t=this.jobInfoDataList,a=this.activeJobName;a===e&&t.forEach((function(l,s){if(l.jobName===e){var i=t[s+1]||t[s-1];i&&(a=i.jobName)}})),this.activeJobName="jobList",this.jobInfoDataList=t.filter((function(t){return t.jobName!==e}))},cellClick:function(e,t,a,l){console.log("table行级点击"),console.log(e.jobName);var s=!1;if(this.jobInfoDataList.forEach((function(t){t.jobName!==e.jobName||(s=!0)})),!s){var i={jobName:e.jobName,openType:"show"};this.jobInfoDataList.push(i)}this.activeJobName=e.jobName,console.log(this.jobInfoDataList)},createJob:function(){this.jobInfoDataList.push({depends:"",inputTabs:"",outputTabs:"",state:"",jobName:"newJob",jobLabel:"",cron:"",startDate:"",endDate:"",emails:"",retryCount:""}),this.activeJobName="newJob"},cellDbClick:function(e){console.log(e),console.log("table行级点击"),console.log(e.row.jobName);var t=!1;if(this.jobInfoDataList.forEach((function(a){a.jobName!==e.row.jobName||(t=!0)})),!t){var a={jobName:e.row.jobName,openType:"edit"};this.jobInfoDataList.push(a)}this.activeJobName=e.row.jobName,console.log(this.jobInfoDataList)},handleSizeChange:function(e){this.query.pageSize=e,this.getJobList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.query.pageIndex=e,this.getJobList(),console.log("当前页: ".concat(e))},getJobList:function(){var e=this;Object(i["a"])({url:"/job/getJobList",methods:"get",params:{jobName:this.query.jobName,jobLabel:this.query.jobLabel,state:this.query.state,lastUserName:this.query.lastUserName,pageIndex:this.query.pageIndex,pageSize:this.query.pageSize,teamName:this.query.teamName}}).then((function(t){e.tableData=t.data,e.pageTotal=t.dataLength})).catch((function(e){}))}}},Dt=kt,xt=Object(h["a"])(Dt,l,s,!1,null,"84e8c108",null);t["default"]=xt.exports},1777:function(e,t,a){"use strict";a("3250")},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var l=a("6b75");function s(e){if(Array.isArray(e))return Object(l["a"])(e)}function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var n=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){return s(e)||i(e)||Object(n["a"])(e)||o()}},3250:function(e,t,a){},"38df":function(e,t,a){},"3bb7":function(e,t,a){"use strict";a("9d29")},"3bd4":function(e,t,a){"use strict";a("6b71")},"4b3a":function(e,t,a){"use strict";a("fedf")},5196:function(e,t,a){"use strict";a("daf1")},"5c8e":function(e,t,a){},"6b71":function(e,t,a){},"6b75":function(e,t,a){"use strict";function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}a.d(t,"a",(function(){return l}))},"7c2a":function(e,t,a){},"813a":function(e,t,a){"use strict";a("7c2a")},"9d29":function(e,t,a){},a367:function(e,t,a){},a6a9:function(e,t,a){"use strict";a("38df")},ade3:function(e,t,a){"use strict";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return l}))},da0c:function(e,t,a){"use strict";a("a367")},daf1:function(e,t,a){},e65e:function(e,t,a){"use strict";a("5c8e")},ec55:function(e,t,a){},fedf:function(e,t,a){}}]);