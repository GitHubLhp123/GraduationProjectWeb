(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e275452"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var s=a("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(s["a"])(t,e):void 0}}},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var s=a("6b75");function n(t){if(Array.isArray(t))return Object(s["a"])(t)}function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=a("06c5");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||o(t)||Object(r["a"])(t)||i()}},"53dc":function(t,e,a){"use strict";a("ad59")},"6b75":function(t,e,a){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}a.d(e,"a",(function(){return s}))},abaa:function(t,e,a){"use strict";a("ac71")},ac71:function(t,e,a){},ad59:function(t,e,a){},e2ad:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"大屏展示"}},[a("div",[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:""},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}},[a("el-option",{key:"1",attrs:{label:"时",value:"HOUR"}}),a("el-option",{key:"2",attrs:{label:"日",value:"DAILY"}}),a("el-option",{key:"3",attrs:{label:"月",value:"MONTH"}}),a("el-option",{key:"4",attrs:{label:"年",value:"YEAR"}})],1)],1),a("div",{staticClass:"quarter-div blue"},[a("TransferNum",{model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),a("div",{staticClass:"quarter-div green"},[a("JobTrigger",{model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1)]),a("el-tab-pane",{attrs:{label:"主机监控"}},[a("sys-info-list")],1)],1)],1)},n=[],o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Echarts"},[a("div",{staticStyle:{width:"450px",height:"450px"},attrs:{id:"main"}})])}],i=(a("ac6a"),a("ec9b")),l={name:"Echarts",props:{value:{type:String,default:"DAILY"}},data:function(){return{timer:null,TransferNum:{x:[],y:[]}}},watch:{value:{handler:function(t,e){this.getEchartData(),console.log(this.value),this.getEchartData()},deep:!0}},created:function(){this.getEchartData()},mounted:function(){var t=this;this.timer=setInterval((function(){setTimeout(t.getEchartData,0)}),6e4)},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},methods:{getEchartData:function(){var t=this;Object(i["a"])({url:"/chart/getTransferNum",methods:"get",params:{dateType:this.value}}).then((function(e){var a,s;console.log(e.data);var n=new Array,o=new Array;e.data.forEach((function(t){n.push(t.time),o.push(t.sum)})),t.TransferNum.x=[],t.TransferNum.y=[],(a=t.TransferNum.x).push.apply(a,n),(s=t.TransferNum.y).push.apply(s,o),t.myEcharts(),console.log(e.data)})).catch((function(t){}))},myEcharts:function(){var t=this.$echarts.init(document.getElementById("main")),e={title:{text:"任务传输数量"},tooltip:{},legend:{data:["数量"]},xAxis:{data:this.TransferNum.x},yAxis:{},series:[{name:"时间",type:"line",data:this.TransferNum.y}]};t.setOption(e)}}},c=l,u=a("2877"),d=Object(u["a"])(c,o,r,!1,null,null,null),m=d.exports,f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Echarts"},[a("div",{staticStyle:{width:"450px",height:"450px"},attrs:{id:"job"}})])}],y=(a("28a5"),{name:"Echarts",props:{value:{type:String,default:"DAILY"}},data:function(){return{timer:null,xData:[],series:[]}},mounted:function(){var t=this;this.timer=setInterval((function(){setTimeout(t.getEchartData,0)}),6e4)},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},created:function(){this.getEchartData()},watch:{value:{handler:function(t,e){this.getEchartData(),console.log(this.value),this.getEchartData()},deep:!0}},methods:{getEchartData:function(){var t=this;Object(i["a"])({url:"/chart/getJobTriggerNum",methods:"get",params:{dateType:this.value}}).then((function(e){console.log(e.data),t.xData=[],t.series=[];new Array,new Array;t.series=[{name:"error",type:"line",stack:"总量",data:[]},{name:"success",type:"line",stack:"总量",data:[]},{name:"run",type:"line",stack:"总量",data:[]}],e.data.reverse().forEach((function(e){t.xData.push(e.flag.split(",")[0]),"error"===e.flag.split(",")[1]&&t.series[0].data.push(e.count),"success"===e.flag.split(",")[1]&&t.series[1].data.push(e.count),"run"===e.flag.split(",")[1]&&t.series[2].data.push(e.count)})),console.log(t.series),t.myEcharts(),console.log(e.data)})).catch((function(t){}))},myEcharts:function(){var t=this.$echarts.init(document.getElementById("job")),e={title:{text:"任务运行图"},tooltip:{trigger:"axis"},legend:{data:["error","success","run"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.xData},yAxis:{type:"value"},series:this.series};t.setOption(e)}}}),p=y,v=Object(u["a"])(p,f,h,!1,null,null,null),g=v.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sysInfoList},on:{"cell-dblclick":t.handleClick}},[a("el-table-column",{attrs:{prop:"hostName",label:"主机名",width:"180"}}),a("el-table-column",{attrs:{prop:"ip",label:"ip"}}),a("el-table-column",{attrs:{prop:"cpuUser",label:"用户cpu使用率"}}),a("el-table-column",{attrs:{prop:"cpuSys",label:"系统cpu使用率"}}),a("el-table-column",{attrs:{prop:"systemTotalMemory",label:"系统总内存"}}),a("el-table-column",{attrs:{prop:"systemUsedMemory",label:"系统已用内存"}}),a("el-table-column",{attrs:{prop:"jvmTotalMemory",label:"JVM总内存"}}),a("el-table-column",{attrs:{prop:"jvmFreeMemory",label:"JVM已用内存"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.jvmTotalMemory-e.row.jvmFreeMemory)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"diskTotal",label:"磁盘总空间"}}),a("el-table-column",{attrs:{prop:"diskFree",label:"磁盘已用空间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.diskTotal-e.row.diskFree)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.getSysInfoState(e.row)))]),"正常"===t.getSysInfoState(e.row)?a("el-button",{attrs:{type:"primary",plain:""}},[t._v("正常")]):a("el-button",{attrs:{type:"danger",plain:""}},[t._v("警告")])],1)]}}])}),a("el-table-column",{attrs:{prop:"createDt",label:"心跳时间",width:"140"}})],1),t.viewSysInfoVisible?a("el-dialog",{attrs:{visible:t.viewSysInfoVisible,width:"80%"},on:{"update:visible":function(e){t.viewSysInfoVisible=e}}},[a("div",{staticStyle:{height:"500px"}},[a("sys-info",{attrs:{SysInfo:t.viewSysInfo}})],1)]):t._e()],1)},S=[],I=a("2909"),T=(a("a481"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main",attrs:{id:"main"}},[a("div",{staticClass:"quarter-div ",attrs:{id:"cpu"}}),a("div",{staticClass:"quarter-div ",attrs:{id:"systemMemory"}}),a("div",{staticClass:"quarter-div ",attrs:{id:"jvmMemory"}}),a("div",{staticClass:"quarter-div ",attrs:{id:"disk"}})])}],E={props:{SysInfo:{type:Object}},name:"Echarts",data:function(){return{}},created:function(){console.log(this.SysInfo)},mounted:function(){console.log(this.SysInfo),this.echartsCpu(),this.echartsSystemMemory(),this.echartsJvmMemory(),this.echartsDisk(),console.log(this.SysInfo)},methods:{echartsCpu:function(){console.log(document.getElementById("cpu"));var t=this.$echarts.init(document.getElementById("cpu")),e=void 0;e={series:[{type:"gauge",axisLine:{lineStyle:{width:15,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},pointer:{itemStyle:{color:"auto"}},axisTick:{distance:-10,length:8,lineStyle:{color:"#fff",width:2}},splitLine:{distance:-20,length:30,lineStyle:{color:"#fff",width:4}},axisLabel:{color:"auto",distance:10,fontSize:10},detail:{valueAnimation:!0,formatter:"{value} %",color:"auto"},data:[{value:this.SysInfo.cpuUser+this.SysInfo.cpuSys,name:"CPU"}]}]},console.log("====================="),t.setOption(e)},echartsSystemMemory:function(){console.log(document.getElementById("cpu"));var t=this.$echarts.init(document.getElementById("systemMemory")),e={series:[{name:"systemMemory",type:"gauge",progress:{show:!0,width:10},axisLine:{lineStyle:{width:10}},axisTick:{show:!1},splitLine:{length:15,lineStyle:{width:2,color:"#999"}},axisLabel:{distance:20,color:"#999",fontSize:10},anchor:{show:!0,showAbove:!0,size:20,itemStyle:{borderWidth:10}},title:{show:!0},detail:{valueAnimation:!0,fontSize:80,offsetCenter:[0,"70%"]},data:[{value:Math.round(this.SysInfo.systemUsedMemory/this.SysInfo.systemTotalMemory*100),name:"内存"}]}]};console.log("====================="),t.setOption(e)},echartsJvmMemory:function(){console.log(document.getElementById("cpu"));var t=this.$echarts.init(document.getElementById("jvmMemory")),e={tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"jvmMemory",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}"},data:[{value:Math.round((this.SysInfo.jvmTotalMemory-this.SysInfo.jvmFreeMemory)/this.SysInfo.jvmTotalMemory*100),name:"JVM"}]}]};console.log("====================="),t.setOption(e)},echartsDisk:function(){console.log(document.getElementById("cpu"));var t=this.$echarts.init(document.getElementById("disk")),e={tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"Pressure",type:"gauge",detail:{formatter:"{value}"},data:[{value:Math.round((this.SysInfo.diskTotal-this.SysInfo.diskFree)/this.SysInfo.diskTotal*100),name:"DISK"}]}]};console.log("====================="),t.setOption(e)}}},k=E,x=(a("53dc"),Object(u["a"])(k,T,w,!1,null,"65b0c371",null)),M=x.exports,j={components:{sysInfo:M},name:"SysInfoList",data:function(){return{timer:null,sysInfoList:[],viewSysInfoVisible:!1,viewSysInfo:{}}},created:function(){this.getSysInfoList()},mounted:function(){var t=this;this.timer=setInterval((function(){setTimeout(t.getSysInfoList,0)}),6e4)},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},methods:{messageAlert:function(t,e,a,s){alert(this.getSysInfoState(t))},getSysInfoState:function(t){var e="";return(t.diskTotal-t.diskFree)/t.diskTotal>.8&&(e+="磁盘空间,"),t.cpuUser+t.cpuSys>80&&(e+="cpu,"),t.systemUsedMemory/t.systemTotalMemory>.8&&(e+="系统内存,"),(t.jvmTotalMemory-t.jvmFreeMemory)/t.jvmTotalMemory>.8&&(e+="JVM内存,"),(t.diskTotal-t.diskFree)/t.diskTotal>.8&&(e+="磁盘空间,"),this.getDateDiff(t.createDt)>5&&(e+="宕机,"),e.length>1?"警告:"+e:"正常"},getDateDiff:function(t){console.log(t),t=t.substring(0,19),t=t.replace(/-/g,"/");var e=new Date(t).getTime();console.log(e);var a=(new Date).getTime();console.log(a);var s=a-e,n=Math.floor(s/1e3/60);return console.log(n),n},handleClick:function(t,e,a,s){this.viewSysInfo=t,this.viewSysInfoVisible=!0},getSysInfoList:function(){var t=this;Object(i["a"])({url:"/chart/getSysInfoList",methods:"get",params:{}}).then((function(e){var a;console.log(e),t.sysInfoList=[],(a=t.sysInfoList).push.apply(a,Object(I["a"])(e.data)),console.log(e)})).catch((function(t){console.log("==================="),console.log(t)}))}}},D=j,_=Object(u["a"])(D,b,S,!1,null,"26fc0d7e",null),A=_.exports,O={name:"dashboard",data:function(){return{dateType:"DAILY"}},components:{TransferNum:m,JobTrigger:g,SysInfoList:A},computed:{},methods:{}},L=O,C=(a("abaa"),Object(u["a"])(L,s,n,!1,null,"d5ce84ac",null));e["default"]=C.exports}}]);